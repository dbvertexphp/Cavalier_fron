<div class="max-w-4xl mx-auto mt-10 bg-white shadow-lg rounded-lg p-6">

  <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">
    Add Attendance
  </h2>

  <!-- ================= EMPLOYEE SEARCH ================= -->
  <div class="mb-6 relative">
    <label class="block mb-2 font-semibold text-gray-700">
      Employee Name
    </label>

    <input
      type="text"
      placeholder="Search Employee..."
      [(ngModel)]="employeeSearch"
      (ngModelChange)="searchEmployee()"
      class="w-full px-4 py-2 border rounded focus:outline-none focus:ring focus:border-yellow-400"
    />

    <!-- Autocomplete -->
    <ul
      *ngIf="filteredEmployees.length"
      class="absolute z-10 w-full border mt-1 rounded bg-white shadow max-h-40 overflow-auto"
    >
      <li
        *ngFor="let emp of filteredEmployees"
        (click)="selectEmployee(emp)"
        class="px-4 py-2 hover:bg-yellow-100 cursor-pointer flex items-center gap-2"
      >
        <img [src]="emp.profile" class="w-8 h-8 rounded-full" />
        <span>{{ emp.name }} ({{ emp.empId }})</span>
      </li>
    </ul>

    <!-- Profile -->
    <div *ngIf="selectedEmployee" class="flex justify-center mt-4">
      <img
        [src]="selectedEmployee.profile"
        class="w-20 h-20 rounded-full border shadow"
      />
    </div>

    <!-- Department & Designation -->
    <div *ngIf="selectedEmployee" class="grid grid-cols-2 gap-4 mt-4">
      <div>
        <label class="block mb-1 font-semibold text-gray-700">
          EMPID
        </label>
        <input
          type="text"
          [value]="selectedEmployee.empId"
          readonly
          class="w-full px-4 py-2 border rounded bg-gray-100"
        />
      </div>
      <div>
        <label class="block mb-1 font-semibold text-gray-700">
          Department
        </label>
        <input
          type="text"
          [value]="selectedEmployee.department"
          readonly
          class="w-full px-4 py-2 border rounded bg-gray-100"
        />
      </div>

      <div>
        <label class="block mb-1 font-semibold text-gray-700">
          Designation
        </label>
        <input
          type="text"
          [value]="selectedEmployee.designation"
          readonly
          class="w-full px-4 py-2 border rounded bg-gray-100"
        />
      </div>
    </div>
  </div>

  <!-- ================= ATTENDANCE FORM ================= -->
  <form
    #attendanceForm="ngForm"
    (ngSubmit)="submitAttendance()"
    class="space-y-4"
  >
 <div>
      <label class="block mb-1 font-semibold text-gray-700">
        Shift
      </label>
      <select
        
        required
        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring focus:border-yellow-400"
      >
        <option value="">Select Mode</option>
        <option value="">Morning</option>
        <option value="">Evening</option>
      </select>
    </div>

    <!-- Date -->
    <div>
      <label class="block mb-1 font-semibold text-gray-700">
        Attendance Date
      </label>
      <input
        type="date"
        name="attendanceDate"
        [(ngModel)]="attendance.attendanceDate"
        required
        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring focus:border-yellow-400"
      />
    </div>

    <!-- Mode -->
    <div>
      <label class="block mb-1 font-semibold text-gray-700">
        Attendance Mode
      </label>
      <select
        name="attendanceMode"
        [(ngModel)]="attendance.attendanceMode"
        (change)="onModeChange()"
        required
        class="w-full px-4 py-2 border rounded focus:outline-none focus:ring focus:border-yellow-400"
      >
        <option value="">Select Mode</option>
        <option value="Manual">Manual</option>
        <option value="Biometric">Biometric</option>
      </select>
    </div>

    <!-- Check In -->
    <div class="p-4 border rounded bg-gray-50">

      <div *ngIf="showCheckInTime">
        <label class="block mb-1 font-semibold text-gray-700">
          Check In Time
        </label>
        <input
          type="time"
          name="checkInTime"
          [(ngModel)]="attendance.checkInTime"
          required
          class="w-full px-4 py-2 border rounded"
        />
      </div>

      <div class="mt-3">
        <label class="block mb-1 font-semibold text-gray-700">
          Remark (optional)
        </label>
        <textarea
          name="checkInRemark"
          [(ngModel)]="attendance.checkInRemark"
          class="w-full px-4 py-2 border rounded"
        ></textarea>
      </div>
    </div>

    <!-- Submit -->
    <div class="text-center">
      <button
        type="submit"
        [disabled]="!attendanceForm.valid || !selectedEmployee"
        class="px-6 py-2 bg-yellow-500 text-white font-semibold rounded-lg shadow hover:bg-yellow-600 transition"
      >
        Save Attendance
      </button>
    </div>

  </form>
</div>
